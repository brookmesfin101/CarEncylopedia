@model CarEncylopedia.Main.ViewModels.CompareMakesViewModel

<canvas id="myChart" width="800" height="600"></canvas>

<script type="text/javascript">
    var ctx = document.getElementById('myChart').getContext('2d');
    var cars = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.MakeAverages))
    var compareOn = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.CompareOn))
    
    var makes = [];
    var avgs = [];
    var colors = [];
    var label = `Average ${compareOn} of Car`;

    debugger;
    
    cars.forEach(el => {
        makes.push(el.Item1);
        avgs.push(el.Item2);
        colors.push(random_rgba());
    })

    function random_rgba() {
        return 'rgba(' + Math.round(Math.random() * 255) + ',' + Math.round(Math.random() * 255) + ',' + Math.round(Math.random() * 255) + ',' + Math.random().toFixed(1) + ')';
    }

    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: makes,
            datasets: [{
                label: label,
                data: avgs,
                backgroundColor: colors,
                borderColor: 'rgba(0,0,0,.5)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });
</script>